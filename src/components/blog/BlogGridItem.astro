---
import type { CollectionEntry } from "astro:content";
import Authors from "@components/Authors.astro";
import { format } from 'date-fns';
import { getPermalink } from "@utils/permalinks";
import { Image } from '@astrojs/image/components';
import { trimPublic } from "@utils/utils";

export interface Props {
    post: CollectionEntry<'blog'>
}
const { post } = Astro.props;
---

<div>

    {post.data.heroImage && 
        <div class="overflow-hidden rounded-xl">
            <Image src={trimPublic(post.data.heroImage)} width={1000} aspectRatio={16/9} alt={post.data.title} />
        </div>
    }
    <div class="flex gap-1 items-center mt-6 text-xs text-violet-600 font-semibold">
        <Authors authors={post.data.authors} show={1} />
        <span>â€¢</span>
        <span>{format(new Date(post.data.pubDate), 'do LLLL yyyy')}</span>
    </div>
    <div class="mt-2">
        <a href={getPermalink(post.slug, 'blog_post')} class="flex justify-between gap-1">
            <h2 class="text-xl text-gray-800 font-bold font-headings">{post.data.title}</h2>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="shrink-0 grow-0 w-4 h-4 mt-1">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25" />
            </svg>
        </a>
        <p class="text-xs mt-2 text-gray-500">{post.data.description}</p>
    </div>
    <div class="mt-3 text-xs font-semibold flex gap-2">
        {post.data.tags && post.data.tags.map((tag) => (
            <a href={getPermalink(tag, 'blog_tag')} class="bg-violet-300 text-violet-800 rounded-xl px-3 py-1">{tag}</a>
        ))}
    </div>
</div>